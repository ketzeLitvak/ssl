# Fases De Traducción y Errores
## Curso K2051 - Ezequiel Ilan Litvak
 
**Acerca del compilador**
Las funciones y opciones que presenta mi compilador, el gcc, se pueden observar en la terminal al hacer el siguiente comando: "gcc --help".
 
**Secuencia de pasos**
 
*Preprocesador*
1b. Para poder preprocesar el hello2.c, se usa el siguiente comando: "gcc -E hello2.c". Sin embargo, de esa forma, el resultado se va a ver todo en la terminal. Para poder verlo mejor, se puede agregar al comando anterior lo siguiente: "-o hello2.i", que va a dirigir la salida del anterior comando a un archivo .i llamado hello2. En el archivo, se puede ver el resultado del preprocesamiento de hello2.c. En este se puede ver al principio, los headers de las bibliotecas usadas en el #define del hello2.c, los cuales en este caso, son los headers de la biblioteca estándar (stdio). A su vez, saca del archivo esas declaraciones, es decir, no están los #define en el archivo preprocesado debido a que se intercambiaron por los headers. Al final del mismo, se puede ver también como el preprocesador cambia los comentarios por espacios, como ocurre con el comentario "/*medio*/" del archivo hello2.c. Un detalle importante es que el preprocesador no tuvo problemas en preprocesar el archivo hello2.c por más que este tenía varios problemas sintácticos. Esto se debe a que el preprocesador no tiene la capacidad para ver estos errores. Los números y numerales que están al principio de cada línea son de ayuda para el preprocesador, se pueden sacar si al comando de preprocesamiento se le agrega un "-P".
 
1d. La primera línea es el header de la función llamada "printf" en donde se están definiendo sus parámetros. En el primer parámetro se define como "const char* restrict s". Declarar a la variable como const significa que no se puede modificar el valor de lo que está apuntando s, debido a que ese valor es constante. Sin embargo, si se puede modificar el valor al que está apuntando s. s es una variable de tipo char* que significa que es un puntero a una variable de tipo char. Declarar a la variable con la definición restrict es una forma de avisar al compilador que s apunta a un objeto y solo s lo hace, ningún otra variable del programa. Esto ayuda al compilador a saber que si afecta a s, no va a generar un efecto que genere problemas con otras variables del programa, lo cual le ayuda a hacer optimizaciones.
 
1e. Se preprocesa el archivo hello3.c con el siguiente comando: "gcc -E hello3.c -o hello3.i". Se observa que la única diferencia entre el hello3.c y el hello3.i son los numerales y anotaciones del preprocesador al principio, por lo que si se usa el siguiente comando: "gcc -E hello3.c -P -o hello3SinNumerales.i", se puede ver que al preprocesar el archivo, hello3.c y hello3SinNumerales.i son identicos. El preprocesador no hizo cambios en lo que está escrito, sino que hubo un cambio en el tipo de archivo.
Un detalle para ver es entre el hello3.i y el hello2.i. El primero, como el hello3.c no tenía el #define para la biblioteca estándar, no copio los headers de toda la misma, sin embargo, en el segundo como tenía el #define, se copiaron todos los headers y el archivo quedó más grande.
 
*Compilación*
2a. Se compiló sin ensamblar el archivo hello3.c con el siguiente comando: "gcc hello3.c -S". Al hacerlo, el programa devuelve warnings y errores. Una de las warnings es debido a que "prontf" no está definida, por lo que la toma implícitamente. Debido a los errores no pudo compilar bien, por ejemplo, se esperaba una declaración al final del input (faltaba cerrar la llave del main). Este último es un error sintáctico, el cual ahora sí, el compilador puede ver.
2b. Se compiló sin ensamblar el archivo hello4.c con el siguiente comando: "gcc hello4.c -S". Ahora si compiló correctamente.
2c. El archivo creado, el hello4.s, es un programa en código de máquina, en assembler, el cual está haciendo espacio para la variable i (líneas 18 y 19 en especial) y después llama a main (línea 20) en donde se introduce el valor 42 a los espacios liberados para la variable i (línea 21) y se llama a prontf para su ejecución (línea 23), con su valor guardado en la variable LC0 (inicialmente en líneas 5 a 9 y después se lo mueve para la utilización de la función prontf en la línea 22. En la línea 24 se pone un 0 (es el $0 que se introduce, que simboliza el valor literal de 0) en el registro "a" para finalizar el programa.
2d. Para ensamblar, se utiliza el siguiente comando: "gcc hello4.s -c". El resultado es el archivo hello4.o, el cual se ensamblo correctamente sin problemas, por lo que desde el punto de vista del compilador no hay problemas. Si se hubiera ensamblado el archivo hello4.c con el siguiente comando: "gcc hello4.c -c", se hubiera ensamblado correctamente también, sin embargo, en la terminal se muestra un warning acerca de la declaración implícita de la función prontf.
 
*Vinculación*
3a. Se vincula el archivo hello4.o con el siguiente comando: "gcc hello4.o -o hello4.exe". El comando tira un error en la consola y no se vincula correctamente. El error es "undefined reference to `prontf'", el cual es un error de vinculación, debido a que el linker no sabe a que vincular la función prontf ya que no tiene definición. A su vez, en el error se muestra la dirección al linker, en mi caso "a:/mingw/bin/../lib/gcc/mingw32/9.2.0/../../../../mingw32/bin/ld.exe". Se puede observar que el ejecutable "ld.exe" seria el linker que utiliza el mingw32, el cual en nuestro caso, retorno 1 ("ld returned 1 exit status") por lo que al no ser 0 se toma como error.

